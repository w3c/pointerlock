<!DOCTYPE html PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>
<html lang="en" dir="ltr">
<head>
    <title>Pointer Lock</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width">
    <!--
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
    
    

    <style type="text/css">
      .event {
        font-family: monospace;
        color: #459900;
      }

      pre.idl {
        white-space: pre-wrap;
      }
    </style>

    <script>
        function escapeContents(doc, content) {
            return doc._esc(content);
        }
    </script>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-TR.css" rel="stylesheet" type="text/css" charset="utf-8"><style type="text/css">
/*****************************************************************
 * ReSpec CSS
 * Robin Berjon (robin at berjon dot com)
 * v0.05 - 2009-07-31
 *****************************************************************/


/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

code {
    color:  #ff4500;
}


/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID {
    font-weight:    bold;
    color:  #005a9c;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.attributes dd, .methods dd, .constants dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}

/* --- TOC --- */
.toc a {
    text-decoration:    none;
}

a .secno {
    color:  #000;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

/* --- EXAMPLES --- */
pre.example {
    border-top: 1px solid #ff4500;
    border-bottom: 1px solid #ff4500;
    padding:    1em;
    margin-top: 1em;
}

pre.example::before {
    content:    "Example";
    display:    block;
    width:      150px;
    background: #ff4500;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

/* --- EDITORIAL NOTES --- */
.issue {
    padding:    1em;
    margin: 1em 0em 0em;
    border: 1px solid #f00;
    background: #ffc;
}

.issue::before {
    content:    "Issue";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #f00;
    background: #fff;
    padding:    3px 1em;
}

.note {
    margin: 1em 0em 0em;
    padding:    1em;
    border: 2px solid #cff6d9;
    background: #e2fff0;
}

.note::before {
    content:    "Note";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #cff6d9;
    background: #fff;
    padding:    3px 1em;
}

/* --- Best Practices --- */
div.practice {
    border: solid #bebebe 1px;
    margin: 2em 1em 1em 2em;
}

span.practicelab {
    margin: 1.5em 0.5em 1em 1em;
    font-weight: bold;
    font-style: italic;
}

span.practicelab   { background: #dfffff; }

span.practicelab {
    position: relative;
    padding: 0 0.5em;
    top: -1.5em;
}

p.practicedesc {
    margin: 1.5em 0.5em 1em 1em;
}

@media screen {
    p.practicedesc {
        position: relative;
        top: -2em;
        padding: 0;
        margin: 1.5em 0.5em -1em 1em;
    }
}

/* --- SYNTAX HIGHLIGHTING --- */
pre.sh_sourceCode {
  background-color: white;
  color: black;
  font-style: normal;
  font-weight: normal;
}

pre.sh_sourceCode .sh_keyword { color: #005a9c; font-weight: bold; }           /* language keywords */
pre.sh_sourceCode .sh_type { color: #666; }                            /* basic types */
pre.sh_sourceCode .sh_usertype { color: teal; }                             /* user defined types */
pre.sh_sourceCode .sh_string { color: red; font-family: monospace; }        /* strings and chars */
pre.sh_sourceCode .sh_regexp { color: orange; font-family: monospace; }     /* regular expressions */
pre.sh_sourceCode .sh_specialchar { color: 	#ffc0cb; font-family: monospace; }  /* e.g., \n, \t, \\ */
pre.sh_sourceCode .sh_comment { color: #A52A2A; font-style: italic; }         /* comments */
pre.sh_sourceCode .sh_number { color: purple; }                             /* literal numbers */
pre.sh_sourceCode .sh_preproc { color: #00008B; font-weight: bold; }       /* e.g., #include, import */
pre.sh_sourceCode .sh_symbol { color: blue; }                            /* e.g., *, + */
pre.sh_sourceCode .sh_function { color: black; font-weight: bold; }         /* function calls and declarations */
pre.sh_sourceCode .sh_cbracket { color: red; }                              /* block brackets (e.g., {, }) */
pre.sh_sourceCode .sh_todo { font-weight: bold; background-color: #00FFFF; }   /* TODO and FIXME */

/* Predefined variables and functions (for instance glsl) */
pre.sh_sourceCode .sh_predef_var { color: #00008B; }
pre.sh_sourceCode .sh_predef_func { color: #00008B; font-weight: bold; }

/* for OOP */
pre.sh_sourceCode .sh_classname { color: teal; }

/* line numbers (not yet implemented) */
pre.sh_sourceCode .sh_linenum { display: none; }

/* Internet related */
pre.sh_sourceCode .sh_url { color: blue; text-decoration: underline; font-family: monospace; }

/* for ChangeLog and Log files */
pre.sh_sourceCode .sh_date { color: blue; font-weight: bold; }
pre.sh_sourceCode .sh_time, pre.sh_sourceCode .sh_file { color: #00008B; font-weight: bold; }
pre.sh_sourceCode .sh_ip, pre.sh_sourceCode .sh_name { color: #006400; }

/* for Prolog, Perl... */
pre.sh_sourceCode .sh_variable { color: #006400; }

/* for LaTeX */
pre.sh_sourceCode .sh_italics { color: #006400; font-style: italic; }
pre.sh_sourceCode .sh_bold { color: #006400; font-weight: bold; }
pre.sh_sourceCode .sh_underline { color: #006400; text-decoration: underline; }
pre.sh_sourceCode .sh_fixed { color: green; font-family: monospace; }
pre.sh_sourceCode .sh_argument { color: #006400; }
pre.sh_sourceCode .sh_optionalargument { color: purple; }
pre.sh_sourceCode .sh_math { color: orange; }
pre.sh_sourceCode .sh_bibtex { color: blue; }

/* for diffs */
pre.sh_sourceCode .sh_oldfile { color: orange; }
pre.sh_sourceCode .sh_newfile { color: #006400; }
pre.sh_sourceCode .sh_difflines { color: blue; }

/* for css */
pre.sh_sourceCode .sh_selector { color: purple; }
pre.sh_sourceCode .sh_property { color: blue; }
pre.sh_sourceCode .sh_value { color: #006400; font-style: italic; }

/* other */
pre.sh_sourceCode .sh_section { color: black; font-weight: bold; }
pre.sh_sourceCode .sh_paren { color: red; }
pre.sh_sourceCode .sh_attribute { color: #006400; }

</style><link href="http://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet" type="text/css" charset="utf-8"></head>
  <body style="display: inherit; "><div class="head"><p><a href="http://www.w3.org/"><img width="72" height="48" src="http://www.w3.org/Icons/w3c_home" alt="W3C"></a></p><h1 class="title" id="title">Pointer Lock</h1><h2 id="w3c-working-draft-23-may-2012"><acronym title="World Wide Web Consortium">W3C</acronym> Working Draft 23 May 2012</h2><dl><dt>This version:</dt><dd><a href="http://www.w3.org/TR/2012/WD-pointerlock-20120523/">http://www.w3.org/TR/2012/WD-pointerlock-20120523/</a></dd><dt>Latest published version:</dt><dd><a href="http://www.w3.org/TR/pointerlock/">http://www.w3.org/TR/pointerlock/</a></dd><dt>Latest editor's draft:</dt><dd><a href="http://dvcs.w3.org/hg/pointerlock/raw-file/default/index.html">http://dvcs.w3.org/hg/pointerlock/raw-file/default/index.html</a></dd><dt>Editor:</dt><dd><a href="http://www.scheib.net">Vincent Scheib</a>, <a href="http://www.google.com/">Google</a></dd>
</dl><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2012 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. <acronym title="World Wide Web Consortium">W3C</acronym> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr></div>
    <div id="abstract" class="introductory section"><h2>Abstract</h2><p>
      This specification defines an API that provides scripted access to raw
      mouse movement data while locking the target of mouse events to a single
      element and removing the cursor from view.  This is an essential input
      mode for certain classes of applications, especially first person
      perspective 3D applications and 3D modelling software.
    </p></div><div id="sotd" class="introductory section"><h2>Status of This Document</h2><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <acronym title="World Wide Web Consortium">W3C</acronym> publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><acronym title="World Wide Web Consortium">W3C</acronym> technical reports index</a> at http://www.w3.org/TR/.</em></p> <!-- Status of This Document -->
      A history of changes to this document can be found at
      <a href="http://dvcs.w3.org/hg/pointerlock/log/default/index.html">
      http://dvcs.w3.org/hg/pointerlock/log/default/index.html</a>
    <p>This document was published by the <a href="http://www.w3.org/2008/webapps/">Web Applications Working Group</a> as a First Public Working Draft. This document is intended to become a <acronym title="World Wide Web Consortium">W3C</acronym> Recommendation. If you wish to make comments regarding this document, please send them to <a href="mailto:public-webapps@w3.org">public-webapps@w3.org</a> (<a href="mailto:public-webapps-request@w3.org?subject=subscribe">subscribe</a>, <a href="http://lists.w3.org/Archives/Public/public-webapps/">archives</a>). All feedback is welcome.</p><p>Publication as a Working Draft does not imply endorsement by the <acronym title="World Wide Web Consortium">W3C</acronym> Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</p><p>This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>. <acronym title="World Wide Web Consortium">W3C</acronym> maintains a <a href="http://www.w3.org/2004/01/pp-impl/42538/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>.</p></div><div id="toc" class="section"><h2 class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">2. </span>Conformance</a></li><li class="tocline"><a href="#pointerlockchange-and-pointerlockerror-events" class="tocxref"><span class="secno">3. </span><code>pointerlockchange</code> and <code>pointerlockerror</code> Events</a></li><li class="tocline"><a href="#element-interface" class="tocxref"><span class="secno">4. </span><span class="idlType formerLink idlType"><code>Element</code></span> Interface</a><ul class="toc"><li class="tocline"><a href="#methods" class="tocxref"><span class="secno">4.1 </span>Methods</a></li></ul></li><li class="tocline"><a href="#extensions-to-the-document-interface" class="tocxref"><span class="secno">5. </span>Extensions to the <span class="idlType formerLink idlType"><code>Document</code></span> Interface</a><ul class="toc"><li class="tocline"><a href="#attributes" class="tocxref"><span class="secno">5.1 </span>Attributes</a></li><li class="tocline"><a href="#methods-1" class="tocxref"><span class="secno">5.2 </span>Methods</a></li></ul></li><li class="tocline"><a href="#extensions-to-the-mouseevent-interface" class="tocxref"><span class="secno">6. </span>Extensions to the <span class="idlType formerLink idlType"><code>MouseEvent</code></span> Interface</a><ul class="toc"><li class="tocline"><a href="#attributes-1" class="tocxref"><span class="secno">6.1 </span>Attributes</a></li></ul></li><li class="tocline"><a href="#requirements" class="tocxref"><span class="secno">7. </span>Requirements</a></li><li class="tocline"><a href="#use-cases" class="tocxref"><span class="secno">8. </span>Use Cases</a><ul class="toc"><li class="tocline"><a href="#relative-view-port-rotation-of-free-moving-virtual-actors" class="tocxref"><span class="secno">8.1 </span>Relative view-port rotation of free moving virtual actors</a></li><li class="tocline"><a href="#free-rotation-of-3d-models-or-panning-of-2d-layers" class="tocxref"><span class="secno">8.2 </span>Free rotation of 3D models or panning of 2D layers</a></li><li class="tocline"><a href="#relative-movement-of-actors" class="tocxref"><span class="secno">8.3 </span>Relative movement of actors</a></li><li class="tocline"><a href="#jog-movement-over-spinner-controls" class="tocxref"><span class="secno">8.4 </span>Jog movement over spinner controls</a></li><li class="tocline"><a href="#synthetic-cursor-interaction-with-html-dom-ui" class="tocxref"><span class="secno">8.5 </span>Synthetic cursor interaction with HTML DOM UI</a></li><li class="tocline"><a href="#view-port-panning-by-moving-a-mouse-cursor-against-the-bounds-of-a---------view-port." class="tocxref"><span class="secno">8.6 </span>View-port panning by moving a mouse cursor against the bounds of a
        view-port.</a></li><li class="tocline"><a href="#game-lobby--timer-based-pointer-lock" class="tocxref"><span class="secno">8.7 </span>Game Lobby, timer based pointer lock</a></li><li class="tocline"><a href="#game-portal" class="tocxref"><span class="secno">8.8 </span>Game Portal</a></li></ul></li><li class="tocline"><a href="#security" class="tocxref"><span class="secno">9. </span>Security</a></li><li class="tocline"><a href="#frequently-asked-questions" class="tocxref"><span class="secno">10. </span>Frequently Asked Questions</a><ul class="toc"><li class="tocline"><a href="#why-not-merge-with-mouse-capture--setcapture" class="tocxref"><span class="secno">10.1 </span>Why not merge with Mouse Capture: setCapture()?</a></li><li class="tocline"><a href="#why-not-repurpose-mouseevent-s-.clientx-y-.screenx-y" class="tocxref"><span class="secno">10.2 </span>Why not repurpose MouseEvent's .clientX/Y .screenX/Y?</a></li><li class="tocline"><a href="#why-use-.movementx-y-instead-of-.deltax-y" class="tocxref"><span class="secno">10.3 </span>Why use .movementX/Y instead of .deltaX/Y?</a></li><li class="tocline"><a href="#why-bundle-all-functionality--hiding-cursor--providing-mouse-deltas----------instead-of-using-css-to-hide-the-cursor--always-providing-delta-values----------and-offering-an-api-to-restrict-the-cursor-movement-to-a-portion-of-the---------web-page" class="tocxref"><span class="secno">10.4 </span>Why bundle all functionality (hiding cursor, providing mouse deltas)
        instead of using CSS to hide the cursor, always providing delta values,
        and offering an API to restrict the cursor movement to a portion of the
        web page?</a></li><li class="tocline"><a href="#high-resolution-deltas---high-frequency-updates" class="tocxref"><span class="secno">10.5 </span>High resolution deltas / High frequency updates?</a></li><li class="tocline"><a href="#why-modify-mouseevent-and-reuse-existing-mouse-events-instead-of---------creating-a-mouse-delta-event" class="tocxref"><span class="secno">10.6 </span>Why modify MouseEvent and reuse existing mouse events instead of
        creating a mouse delta event?</a></li><li class="tocline"><a href="#why-separate-targets-for-mouse-events-under-pointer-lock-and-keyboard---------input-focus" class="tocxref"><span class="secno">10.7 </span>Why separate targets for mouse events under pointer lock and keyboard
        input focus?</a></li></ul></li><li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">A. </span>Acknowledgements</a></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">B. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">B.1 </span>Normative references</a></li><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">B.2 </span>Informative references</a></li></ul></li></ul></div>

    

    <div id="introduction" class="informative section">

      <!--OddPage--><h2><span class="secno">1. </span>Introduction</h2><p><em>This section is non-normative.</em></p>

      <p>The Pointer Lock API provides for input methods of applications based on
      the movement of the mouse, not just the absolute position of a cursor.  A
      popular example is that of first person movement controls in three
      dimensional graphics applications such as games.  Movement of the mouse is
      interpreted for rotation of the view-port, there is no limit to how far
      movement can go, and no mouse cursor is displayed.</p>

      <p>Pointer Lock is related to Mouse Capture [<cite><a class="bibref" rel="biblioentry" href="#bib-MDN-SETCAPTURE">MDN-SETCAPTURE</a></cite>].  Capture provides
      continued event delivery to a target element while a mouse is being
      dragged, but ceases when the mouse button is released.  Pointer Lock differs
      by being persistent, not limited by screen boundaries, sending events
      regardless of mouse button state, hiding the cursor, and not releasing
      until an API call or specific release gesture by the user.</p>

      <p>Pointer Lock deals with capturing a single resource and relating it to
      a single element. This is similar to the Fullscreen API [<cite><a class="bibref" rel="biblioentry" href="#bib-FULLSCREEN">FULLSCREEN</a></cite>], which
      promotes a single element to be full screen. The Pointer Lock API chooses
      to pattern the resource capture, state change, and release API as closely
      as possible after the Fullscreen API.</p>

      <p>The Pointer Lock interaction mode was previously referred to as
      mouse lock. The name was changed as many different controller types
      besides mice can manipulate the on screen pointing cursor, and they are
      all impacted.</p>

    </div>

    <div id="conformance" class="section"><!--OddPage--><h2><span class="secno">2. </span>Conformance</h2><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p>
<p>The key words <em class="rfc2119" title="must">must</em>, <em class="rfc2119" title="must not">must not</em>, <em class="rfc2119" title="required">required</em>, <em class="rfc2119" title="should">should</em>, <em class="rfc2119" title="should not">should not</em>, <em class="rfc2119" title="recommended">recommended</em>, <em class="rfc2119" title="may">may</em>, and <em class="rfc2119" title="optional">optional</em> in this specification are to be interpreted as described in [<cite><a class="bibref" rel="biblioentry" href="#bib-RFC2119">RFC2119</a></cite>].</p>

      <p>
        This specification defines conformance criteria that apply to a single
        product: the <dfn id="dfn-user-agent">user agent</dfn> that implements
        the interfaces that it contains.
      </p>

      <p>
        Implementations that use ECMAScript to implement the APIs defined in
        this specification <em class="rfc2119" title="must">must</em> implement them in a manner consistent with the
        ECMAScript Bindings defined in the Web IDL specification [<cite><a class="bibref" rel="biblioentry" href="#bib-WEBIDL">WEBIDL</a></cite>] as
        this specification uses that specification and terminology.
      </p>

      <p>
        A conforming implementation is required to implement all fields
        defined in this specification.
      </p>
    </div>

    <div id="pointerlockchange-and-pointerlockerror-events" class="section">
      <!--OddPage--><h2><span class="secno">3. </span><code>pointerlockchange</code> and <code>pointerlockerror</code> Events</h2>

      <p>Two events are used to communicate pointer lock state change or
      an error in changing state. They are named <dfn id="dfn-pointerlockchange">pointerlockchange</dfn>
      and <dfn id="dfn-pointerlockerror">pointerlockerror</dfn>.</p>

      <p><a>User agents</a>
      must deliver these events by <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#queue-a-task">
      queuing a task</a> to <a class="external" href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-event-fire">
      fire an event</a> of the appropriate name with its
      <code>bubble</code> attribute set to true to the pointer lock
      <a href="#dfn-target" class="internalDFN">target</a> element's <a href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-node-document">
      node document</a>.</p>
    </div>

    <div id="element-interface" class="section">
      <!--OddPage--><h2><span class="secno">4. </span><a href="#idl-def-Element" class="idlType"><code>Element</code></a> Interface</h2>
      <p>
        The <a href="#idl-def-Element" class="idlType"><code>Element</code></a> interface is extended to provide the ability to
        request the the pointer be locked.
      </p>

      <pre class="idl"><span class="idlInterface" id="idl-def-Element">partial interface <span class="idlInterfaceID">Element</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-Element-requestPointerLock-void">requestPointerLock</a></span> ();</span>
};</span>
</pre><div id="methods" class="section"><h3><span class="secno">4.1 </span>Methods</h3><dl class="methods"><dt id="widl-Element-requestPointerLock-void"><code>requestPointerLock</code></dt><dd>
          <dfn title="requestPointerLock" id="dfn-requestpointerlock"></dfn>

          <p>Requests that the pointer be locked to a DOM element
          <dfn id="dfn-target">target</dfn>. The <a href="#dfn-user-agent" class="internalDFN">user agent</a> determines if pointer lock
          state will be entered and upon lock state change or error must send
          either a <a href="#dfn-pointerlockchange" class="internalDFN">pointerlockchange</a> or <a href="#dfn-pointerlockerror" class="internalDFN">pointerlockerror</a>
          event respectively.

          </p><p>Pointer lock must succeed only if the window is in focus and the
          user-agent is the active application of the operating system. The
          <a href="#dfn-target" class="internalDFN">target</a> element need not be in focus.</p>

          <p>Pointer lock must succeed only if the <a href="#dfn-target" class="internalDFN">target</a> is in the DOM
          tree.  If the <a href="#dfn-target" class="internalDFN">target</a> is removed from the DOM tree after pointer
          lock is entered then pointer lock will be lost and a
           <a href="#dfn-pointerlockchange" class="internalDFN">pointerlockchange</a> event sent.</p>

          <p>If any element is already locked (including this one) the pointer
          lock <a href="#dfn-target" class="internalDFN">target</a> must be updated to this element and a
          <a href="#dfn-pointerlockchange" class="internalDFN">pointerlockchange</a> event sent.</p>

          <p>Once in the locked state the <a href="#dfn-user-agent" class="internalDFN">user agent</a> must fire all relevant
          user generated <code>MouseEvent</code> events (for example:
          <code>mousemove</code>, <code>mousedown</code>, <code>mouseup</code>,
          <code>click</code>, <code>wheel</code>)[<cite><a class="bibref" rel="biblioentry" href="#bib-DOM-LEVEL-3-CORE">DOM-LEVEL-3-CORE</a></cite>]
          to the <a href="#dfn-target" class="internalDFN">target</a> of pointer lock, and not fire mouse events to
          other elements.  Events that require the concept of a mouse cursor must
          not be dispatched (for example: <code>mouseover</code>,
          <code>mouseout</code>, <code>drag</code>, <code>drop</code>).</p>

          <p>In the locked state the system mouse cursor
          must be hidden. Movement and button presses of the mouse must not
          cause the window to lose focus.</p>

          <p>Synthetic mouse events created by application script act the same
          regardless of lock state.</p><p>
        </p><div><em>No parameters.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
    </div>

    <div id="extensions-to-the-document-interface" class="section">
      <!--OddPage--><h2><span class="secno">5. </span>Extensions to the <a href="#idl-def-Document" class="idlType"><code>Document</code></a> Interface</h2>

      <pre class="idl"><span class="idlInterface" id="idl-def-Document">partial interface <span class="idlInterfaceID">Document</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a href="#idl-def-Element" class="idlType"><code>Element</code></a></span> <span class="idlAttrName"><a href="#widl-Document-pointerLockElement">pointerLockElement</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-Document-exitPointerLock-void">exitPointerLock</a></span> ();</span>
};</span>
</pre><div id="attributes" class="section"><h3><span class="secno">5.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-Document-pointerLockElement"><code>pointerLockElement</code> of type <span class="idlAttrType"><a href="#idl-def-Element" class="idlType"><code>Element</code></a></span>, readonly</dt><dd>
          <dfn title="pointerLockElement" id="dfn-pointerlockelement"></dfn>

          <p>Returns the element set as the <a href="#dfn-target" class="internalDFN">target</a> for mouse events while the pointer
          is locked. Null if unlocked.</p>
        </dd></dl></div><div id="methods-1" class="section"><h3><span class="secno">5.2 </span>Methods</h3><dl class="methods"><dt id="widl-Document-exitPointerLock-void"><code>exitPointerLock</code></dt><dd>
          <dfn title="exitPointerLock" id="dfn-exitpointerlock"></dfn>

          <p>Initiates an exit from pointer lock state if currently locked,
          and sends a <a href="#dfn-pointerlockchange" class="internalDFN">pointerlockchange</a> event when the lock state
          has bene exited.</p>

          <p>The system mouse cursor must be displayed again and positioned at
          the same location that it was when pointer lock was entered (the same
          location that is reported in <code>screenX</code>/<code>Y</code>
          when the pointer is locked).</p>
        <div><em>No parameters.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
    </div>

    <div id="extensions-to-the-mouseevent-interface" class="section">
      <!--OddPage--><h2><span class="secno">6. </span>Extensions to the <a href="#idl-def-MouseEvent" class="idlType"><code>MouseEvent</code></a> Interface</h2>

      <p>User agents must extend the MouseEvent interface [<a href="http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html#events-MouseEvent">DOMMOUSE</a>]
      with two members:</p>

      <pre class="idl"><span class="idlInterface" id="idl-def-MouseEvent">partial interface <span class="idlInterfaceID">MouseEvent</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>long</a></span> <span class="idlAttrName"><a href="#widl-MouseEvent-movementX">movementX</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>long</a></span> <span class="idlAttrName"><a href="#widl-MouseEvent-movementY">movementY</a></span>;</span>
};</span>
</pre><div id="attributes-1" class="section"><h3><span class="secno">6.1 </span>Attributes</h3><dl class="attributes"><dt id="widl-MouseEvent-movementX"><code>movementX</code> of type <span class="idlAttrType"><a>long</a></span>, readonly</dt><dd><dfn title="movementX" id="dfn-movementx"></dfn></dd><dt id="widl-MouseEvent-movementY"><code>movementY</code> of type <span class="idlAttrType"><a>long</a></span>, readonly</dt><dd><dfn title="movementY" id="dfn-movementy"></dfn></dd></dl></div>

      <p>The members <code>movementX</code> and <code>movementY</code> must
      provide the change in position of the pointer, as if the values of
      <code>screenX</code>/<code>Y</code> were stored between two subsequent
      <code>mousemove</code> events <code>eNow</code> and
      <code>ePrevious</code> and the difference taken
      <code>movementX = eNow.screenX-ePrevious.screenX</code>.</p>

      <p><code>movementX</code>/<code>Y</code> must be valid regardless of pointer
      lock state.</p>

      <p>When unlocked, the system cursor can exit and re-enter the <a href="#dfn-user-agent" class="internalDFN">user
      agent</a> window.  If it does so and the <a href="#dfn-user-agent" class="internalDFN">user agent</a> was not the
      target of operating system mouse move events then the most recent pointer
      position will be unknown to the <a href="#dfn-user-agent" class="internalDFN">user agent</a> and
      <code>movementX</code>/<code>Y</code> can not be computed and must be set
      to zero.</p>

      <p>When pointer lock is enabled <code>clientX</code>, <code>clientY</code>,
      <code>screenX</code>, and <code>screenY</code> must hold constant values
      as if the pointer did not move at all once pointer lock was entered.  But
      <code>movementX</code>/<code>Y</code> must continue to provide the change
      in position of the pointer as when the pointer is unlocked.  There will be no
      limit to <code>movementX</code>/<code>Y</code> values if the mouse is
      continuously moved in a single direction.  The concept of the mouse cursor
      will have been removed, and it will not move off the window or be clamped
      by a screen edge.</p>
    </div>

    <div id="requirements" class="section">
      <!--OddPage--><h2><span class="secno">7. </span>Requirements</h2>

      <p>The Pointer Lock API must provide a default system action to unlock the
      pointer.</p>

      <p>The Pointer Lock API must be agnostic to the underlying system-specific
      pointer locking mechanism.</p>

      <p>The Pointer Lock API must exit the pointer lock state if the <a href="#dfn-user-agent" class="internalDFN">user agent</a>,
      window, or tab loses focus.</p>
    </div>

    <div class="informative section" id="use-cases">
      <!--OddPage--><h2><span class="secno">8. </span>Use Cases</h2><p><em>This section is non-normative.</em></p>

      <div id="relative-view-port-rotation-of-free-moving-virtual-actors" class="section">
        <h3><span class="secno">8.1 </span>Relative view-port rotation of free moving virtual actors</h3>

        <p>A player on a first/third person game will need to control the
        view-port orientation.  A widely used method is the use of mouse movements
        to control the viewing angle.  This kind of application can use the Pointer
        Lock API to allow a complete freedom of control over the viewport's yaw
        and pitch even when the user is not pressing mouse buttons.  Those buttons
        can be used for other actions while constantly providing navigation via
        mouse movement.</p>
      </div>

      <div id="free-rotation-of-3d-models-or-panning-of-2d-layers" class="section">
        <h3><span class="secno">8.2 </span>Free rotation of 3D models or panning of 2D layers</h3>

        <p>Users of a three dimensional modeling application will need to rotate
        models.  A application can use the Pointer Lock API to enable the author to
        rotate the model freely in a drag operation without limiting motion.
        Without pointer lock a drag would stop providing motion data when the mouse
        cursor is limited by the edge of the screen.</p>

        <p>Similarly, absolute motion panning of a large two dimensional image
        could be permitted in a single drag operation without cursor / screen
        limits.</p>
      </div>

      <div id="relative-movement-of-actors" class="section">
        <h3><span class="secno">8.3 </span>Relative movement of actors</h3>

        <p>A player on a fast reflexes game controls a paddle to bounce back a
        ball to the opponent, while allowing the same paddle to execute actions
        based on different mouse buttons being pressed.  The application can use
        the Pointer Lock API to allow the player to react quickly without being
        concerned about the mouse cursor leaving the game play area and clicking
        another system application, thus breaking the game flow.</p>
      </div>

      <div id="jog-movement-over-spinner-controls" class="section">
        <h3><span class="secno">8.4 </span>Jog movement over spinner controls</h3>

        <p>When modifying numerically magnitudes in applications sometimes the
        user will prefer to "drag" a numeric control by its button handles to
        increment or decrement the numeric value.  E.g. a spinner with a
        number entry text box and arrows pointing up and down that can be
        clicked or dragged on to change the value. An
        application could use the Pointer Lock API to allow modifying the numeric
        values beyond what the logical screen bounds allow.  The same could apply
        for a control that fast forwards or rewinds a video or audio stream like a
        "jog".</p>
      </div>

      <div id="synthetic-cursor-interaction-with-html-dom-ui" class="section">
        <h3><span class="secno">8.5 </span>Synthetic cursor interaction with HTML DOM UI</h3>

        <p>Some games use a classical cursor, however they want it to be limited
        or controlled in some manner.  E.g.  limited to the bounds of the game, or
        movable by the game.  Locking the pointer enables this if the application
        creates their own cursor.  However HTML and DOM should still be available
        to use for user interface.  Synthetic mouse events should be permitted to
        allow an application defined cursor to interact with DOM.  E.g.  the
        following code should permit a custom cursor to send click events while
        the pointer is locked:</p>

        <pre class="example">document.addEventListener("click", function (e) {
  if (e._isSynthetic)
    return;
  // send a synthetic click
  var ee = document.createEvent("MouseEvents");
  ee._isSynthetic = true;
  x = myCursor.x;
  y = myCursor.y;
  ee.initMouseEvent("click", true, true, null, 1,
                    x + e.screenX - e.clientX,
                    y + e.screenY - e.clientY,
                    x,
                    y);
  var target = document.elementFromPoint(x, y)
  if (target)
    target.dispatchEvent(ee)
});</pre>

        <p>Note that synthetic clicks may not be permitted by a <a href="#dfn-user-agent" class="internalDFN">user agent</a> to
        produce the same default action as a non-synthetic click.  However,
        application handlers can still take action and provide user interface with
        existing HTML &amp; DOM mechanisms.</p>
      </div>

      <div id="view-port-panning-by-moving-a-mouse-cursor-against-the-bounds-of-a---------view-port." class="section">
        <h3><span class="secno">8.6 </span>View-port panning by moving a mouse cursor against the bounds of a
        view-port.</h3>

        <p>Real Time Strategy games often use this technique.  When the player
        moves the pointer to the view-port borders, if they "push" the border
        with a mouse movement, the view-port is panned over the game area
        according to how much they move the mouse.  When moving the mouse cursor
        within the bounds of the view port it acts at is typically would on a
        system.  Applications may choose to implement this using pointer lock and
        the previous use case of "Synthetic cursor interaction with HTML DOM UI"
        to bring cursor behavior completely under their control.</p>
      </div>

      <div id="game-lobby--timer-based-pointer-lock" class="section">
        <h3><span class="secno">8.7 </span>Game Lobby, timer based pointer lock</h3>

        <p>Games that use pointer lock may desire a traditional UI and system cursor
        while players prepare in a game lobby.  Games usually start after a short
        timer when all players are ready.  Ideally the game could then switch to
        pointer lock mode without requiring a user gesture.  Players should be able
        to seamlessly move from the game lobby into game navigation.</p>
      </div>

      <div id="game-portal" class="section">
        <h3><span class="secno">8.8 </span>Game Portal</h3>

        <p>Game portals, and other sites such as Facebook and Google Plus, host
        games for users to play.  These games may be hosted and served from a
        different origin from that of the portal site.  Embedded games should be
        able to lock the pointer, even in non-full screen mode.</p>
      </div>

    </div>

    <div class="informative section" id="security">
      <!--OddPage--><h2><span class="secno">9. </span>Security</h2><p><em>This section is non-normative.</em></p>

      <p>Security Concerns:</p>
        <ul>
          <li>User gestures may be misdirected to elements the user did not intend
          to interact with.</li>

          <li>Pointer Lock will remove the ability of a user to interact with user
          agent and operating system controls</li>

          <li>Pointer Lock can be called repeated by script after user exits pointer
          lock, blocking user from meaningful progress.</li>

          <li>Full screen exit instructions are displayed in some <a>user agents</a> when
          the pointer is moved to the top of the screen.  During pointer lock that
          gesture is not possible.</li>
        </ul>

        <p>Responses:</p>
        <ul>
          <li>User agents may limit what security origins may lock the pointer.</li>

          <li>User agents may prompt for confirmation before locking, this
          preference may be saved as a content setting.</li>

          <li>Keyboard based escape will always be provided, e.g.  Esc key.</li>

          <li>Persistent display of escape instructions can be provided.</li>

          <li>Repeated escapes of pointer lock can signal <a href="#dfn-user-agent" class="internalDFN">user agent</a> to not re-lock
          the pointer without more specific user intent gesture, e.g.  similar to how
          Chrome suppresses repeated alert() calls.</li>

          <li>Changing to new tabs, windows, or any other action that causes a page
          to lose focus will exit pointer lock.</li>

          <li>Pointer lock can only be engaged when the window is in focus in the user
          agent and operating system.</li>
        </ul>

        <p>Recommendations:</p>
        <ul>
          <li>Esc key should exit pointer lock.</li>

          <li>Preferences per sub-domain can be used to allow or block pointer lock,
          similar to pop-up, geolocation, and fullscreen.</li>
        </ul>

        <p>pointer lock is a required user interaction mode for certain application
        types, but carries a usability concern if maliciously used.  An attacker
        could remove the ability for a user to control their mouse cursor on their
        system.  User agents will prevent this by always providing a mechanism to
        exit pointer lock, by informing the user of how, and by limiting how pointer
        lock can be entered.</p>

        <p>User agents will determine their own appropriate policies, which may be
        specialized per device or differ based on user options.  The following
        discussion illustrates considerations and plausible implementations.</p>

        <dl>
          <dt>Escape from pointer lock must always be possible.</dt>
          <dd>Based on device the mechanisms will vary, but obvious examples include
          the keyboard escape key "Esc" and any control that moves the system focus
          away from the web page (window management keystrokes that change windows,
          operating system buttons such as the Windows key).</dd>

          <dt>Escape instructions may be communicated.</dt>
          <dd>User agents can provide persistent on screen instructions, or
          transitory instructions when pointer lock is entered.  If users are
          particularly dissatisfied with the distraction of instructions <a>user agents</a>
          may offer to hide instructions after sufficient intent is expressed, e.g.
          by permissions.</dd>

          <dt>Escape can not be performed by mouse actions, including the use of the
          context menu.</dt>
          <dd>The intent of the pointer lock feature is to enable rich applications
          not currently available in browsers.  These applications have unbounded
          movement and button press consumption needs, including the use of the
          context menu.</dd><dd>
        </dd></dl>

        <p>Examples of user agent scenarios:</p>

        <dl>
          <dt>A conservative approach</dt>
          <dd>May only permit pointer lock based on a user gesture such as a click
          event.  The <a href="#dfn-user-agent" class="internalDFN">user agent</a> would prompt the user with a confirmation dialog,
          with options to permit, dismiss, or block all repeated attempts.  That
          dialog may be a passive display instead of modal.  Instructions for escape
          would be provided.  After acceptance, a succinct reminder notice of escape
          instructions may persist.  In the extreme, a <a href="#dfn-user-agent" class="internalDFN">user agent</a> may require the
          user to perform an uncommon gesture demonstrating that they understand the
          escape gesture, e.g.  by pressing F10.</dd>

          <dt>A full screen approach</dt>
          <dd>May permit pointer lock at any time, and cancel pointer lock when full
          screen mode is exited.  Instructions for exiting full screen mode may be
          shown, likely for a brief period of time to not detriment the full screen
          experience.  Entry to pointer lock may be gated by a user explicitly
          confirming the action via a dialog.</dd>

          <dt>A permissive approach</dt>
          <dd>May permit pointer lock for the target or ancestor of a user gesture
          target without prompt.  Escape instructions would likely be displayed
          persistently in a non full screen view.</dd>
        </dl>

        <p>Chrome / Chromium has a design document page for their implementation
        of pointer lock: <a href="http://www.chromium.org/developers/design-documents/mouse-lock">http://www.chromium.org/developers/design-documents/mouse-lock</a></p>

    </div>

    <div class="informative section" id="frequently-asked-questions">
      <!--OddPage--><h2><span class="secno">10. </span>Frequently Asked Questions</h2><p><em>This section is non-normative.</em></p>

      <div id="why-not-merge-with-mouse-capture--setcapture" class="section">
        <h3><span class="secno">10.1 </span>Why not merge with Mouse Capture: setCapture()?</h3>

        <p>Mouse Capture [<cite><a class="bibref" rel="biblioentry" href="#bib-MDN-SETCAPTURE">MDN-SETCAPTURE</a></cite>]
        handles low security risk mouse event target lock for the duration of a
        mouse drag gesture.  pointer lock removes the concept of the cursor and
        directs all events to a given target.  They are related, but
        different.</p>

        <p>If a browser implemented both, it would be reasonable to support a
        combination of traits: The security simplicity of "automatically release
        lock when mouse up" and the increased functionality of total control over
        mouse input and removal of the system cursor.  The security trait would
        allow more permissive use of the feature for applications that only
        required a short burst of pointer lock during a drag event.</p>

        <p>This functionality is omitted from the initial version of this spec
        because it helps the minor use cases in windowed mode but we still do not
        have an implementation solving the major ones.  And, to implement this a
        browser must implement both, which none does yet.  It is not clear if this
        feature should live on .lock or on .setCapture.  If both were
        implemented, either API could be augmented fairly easily to offer the
        hybrid functionality.</p>
      </div>

      <div id="why-not-repurpose-mouseevent-s-.clientx-y-.screenx-y" class="section">
        <h3><span class="secno">10.2 </span>Why not repurpose MouseEvent's .clientX/Y .screenX/Y?</h3>

        <p>Even in non locked state, the delta values of mouse movement are
        useful.  Changing the meaning of .client or .screen based on lock state
        would also cause easy errors in code not carefully monitoring the lock
        state.</p>
      </div>

      <div id="why-use-.movementx-y-instead-of-.deltax-y" class="section">
        <h3><span class="secno">10.3 </span>Why use .movementX/Y instead of .deltaX/Y?</h3>

        <p>When the pointer is locked 'wheel' events should be sent to the pointer
        lock <a href="#dfn-target" class="internalDFN">target</a> element just as 'mousemove' events are.  There is a naming
        conflict with .deltaX/Y/Z as defined in <a href="http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html#events-wheelevents">DOM
        3 'wheel' event</a>.</p>
      </div>

      <div id="why-bundle-all-functionality--hiding-cursor--providing-mouse-deltas----------instead-of-using-css-to-hide-the-cursor--always-providing-delta-values----------and-offering-an-api-to-restrict-the-cursor-movement-to-a-portion-of-the---------web-page" class="section">
        <h3><span class="secno">10.4 </span>Why bundle all functionality (hiding cursor, providing mouse deltas)
        instead of using CSS to hide the cursor, always providing delta values,
        and offering an API to restrict the cursor movement to a portion of the
        web page?</h3>

        <p>There are good motivations to provide a more fine grained approach.
        E.g.  the use case "View-port panning by moving a mouse cursor against the
        bounds of a view-port" doesn't require hiding the mouse cursor, only
        bounding it and always having delta values available.  Also, this
        specification defines the movement deltas to be taken from how the system
        mouse cursor moves, which incorporates operating system filtering and
        acceleration of the mouse movement data.  Applications may desire access
        to a more raw form of movement data prior to adjustments appropriate for a
        mouse cursor.  Also, raw data may provide better than pixel level accuracy
        for movement, as well as higher frequency updates.  Providing the raw
        delta movement would also not require special permission or mode from a
        user, and for some set of applications that do not require bounding the
        cursor may reduce the security barriers and prompts needed.</p>

        <p>There are two justifications for postponing this finer grained
        approach.  The first is a concern of specifying what units mouse movement
        data are provided in.  This specification defines .movementX/Y precisely
        as the same values that could be recorded when the mouse is not under lock
        by changes in .screenX/Y.  Implementations across multiple <a>user agents</a> and
        operating systems will easily be able to meet that requirement and provide
        application developers and users with a consistent experience.  Further,
        users are expected to have already configured the full system of hardware
        input and operating system options resulting in a comfortable control the
        system mouse cursor.  By specifying .movementX/Y in the same units mouse
        lock API applications will be instantly usable to all users because they
        have already settled their preferences.</p>

        <p>Secondly, the implementation of providing movement data and bounding
        the mouse cursor is more difficult in the fine grained approach.  Bundling
        the features together gives implementations freedom to use a variety of
        techniques as appropriate on each operating system and is more practical
        to implement.  Direct APIs do not exist on all platforms (Win, Mac, Linux)
        to bound the cursor to a specific rectangle, and prototypes have not yet
        been developed to demonstrate building that behavior by e.g.  invisible
        windows with xlib or manual cursor movement on Mac.  Unaccelerated Delta
        values have been proposed to be accessed by reading raw Human Interface
        Device (HID) data.  E.g.  WM_INPUT messages on windows, and USB device
        APIs on Mac / Linux.  The challenge here is interpreting and normalizing
        the units to some consistent and specifiable scale.  Also, most APIs
        considered to date are limited to USB devices.</p>

        <p>It would be reasonable to consider adding these capabilities in the
        future, as the currently specified pointer lock API would be easy to
        continue to support if the finer grained delta and confinement features
        were implemented.</p>

        <p>The bundled API is selected for implementation practicality, because
        the desired use cases are supported, and because it will not conflict with
        future improvements as discussed here.</p>
      </div>

      <div id="high-resolution-deltas---high-frequency-updates" class="section">
        <h3><span class="secno">10.5 </span>High resolution deltas / High frequency updates?</h3>

        <p>Not yet, for the same reasons in the previous Q.  See "Why bundle all
        functionality (hiding cursor, providing mouse deltas) instead of using CSS
        to hide the cursor, always providing delta values, and offering an API to
        restrict the cursor movement to a portion of the web page?" above.</p>
      </div>

      <div id="why-modify-mouseevent-and-reuse-existing-mouse-events-instead-of---------creating-a-mouse-delta-event" class="section">
        <h3><span class="secno">10.6 </span>Why modify MouseEvent and reuse existing mouse events instead of
        creating a mouse delta event?</h3>

        <p>When under pointer lock many mouse events remain relevant, e.g.  click,
        mousedown, etc.  These all share the same event data structure MouseEvent.
        If movement data were reported via a new data structure then a new event
        would be needed for reporting delta movement.  The new data structure
        would have many parallels to MouseEvent to offer the same conveniences,
        e.g.  button and modifier key states.  When handling click, down, and up
        events would the existing mousedown, mouseup be used?  If so, they would
        provide .clientX/Y and .screenX/Y with no useful data, but would lack the
        convenience of containing the current movement data.  Or, new events would
        also be required for when the mouse is locked.</p>

        <p>Also, movementX/Y are convenient even when the mouse is not locked.
        This spec requires movement members to always be valid, even when the
        mouse cursor exists.  This reduces code required to track the last cursor
        state and mouseover/mouseout transitions if applications wish to make
        use of delta motion of the mouse.</p>

        <p>The only negative of adding movementX/Y to MouseEvent appears to be the
        unused values in clientX/Y and screenX/Y when under pointer lock.  This does
        not seem to be a significant problem.</p>

        <p>Therefore the minimal change to add movementX/Y to MouseEvent is
        selected to reduce API and implementation complexity.</p>
      </div>

      <div id="why-separate-targets-for-mouse-events-under-pointer-lock-and-keyboard---------input-focus" class="section">
        <h3><span class="secno">10.7 </span>Why separate targets for mouse events under pointer lock and keyboard
        input focus?</h3>

        <p>Consider a game with a 3D view controlled by moving the mouse cursor,
        while the user may still chat with other users via a text console.  It is
        reasonable for the application to accept text input to an element that is
        different than where mouse events are being dispatched.  This is similar
        to pre-existing behavior of receiving mousemove events over any element
        while typing into a form on a page.</p>
      </div>

    </div>

    <div class="appendix informative section" id="acknowledgements">
      <!--OddPage--><h2><span class="secno">A. </span>Acknowledgements</h2><p><em>This section is non-normative.</em></p>

      <p>Many have made contributions to the discussions of this
        specification:</p>

      <ul>
        <li>Adam Barth</li>
        <li>Alexey Proskuryakov</li>
        <li>Aryeh Gregor</li>
        <li>Brandon Andrews</li>
        <li>Darin Fisher</li>
        <li>Dimitri Glazkov</li>
        <li>Glenn Maynard</li>
        <li>Gregg Tavares</li>
        <li>John Villar</li>
        <li>Jonas Sicking</li>
        <li>Klaas Heidstra</li>
        <li>Olli Pettay</li>
        <li>Robert O'Callahan</li>
        <li>Tab Atkins Jr.</li>
      </ul>

      <p>Please let me know if I have inadvertently omitted your name.</p>
    </div>
  

<div id="references" class="appendix section"><!--OddPage--><h2><span class="secno">B. </span>References</h2><div id="normative-references" class="section"><h3><span class="secno">B.1 </span>Normative references</h3><dl class="bibliography"><dt id="bib-DOM-LEVEL-3-CORE">[DOM-LEVEL-3-CORE]</dt><dd>Gavin Nicol; et al. <a href="http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407"><cite>Document Object Model (DOM) Level 3 Core Specification.</cite></a> 7 April 2004. W3C Recommendation. URL: <a href="http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407">http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407</a> 
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key words for use in RFCs to Indicate Requirement Levels.</cite></a> March 1997. Internet RFC 2119.  URL: <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a> 
</dd><dt id="bib-WEBIDL">[WEBIDL]</dt><dd>Cameron McCormack. <a href="http://www.w3.org/TR/2011/WD-WebIDL-20110927/"><cite>Web IDL.</cite></a> 27 September 2011. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2011/WD-WebIDL-20110927/">http://www.w3.org/TR/2011/WD-WebIDL-20110927/</a> 
</dd></dl></div><div id="informative-references" class="section"><h3><span class="secno">B.2 </span>Informative references</h3><dl class="bibliography"><dt id="bib-FULLSCREEN">[FULLSCREEN]</dt><dd>Anne van Kesteren. <a href="http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html"><cite>The Fullscreen API.</cite></a> 4 January 2012. W3C Editor's Draft. (Work in progress.) URL: <a href="http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html">http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html</a> 
</dd><dt id="bib-MDN-SETCAPTURE">[MDN-SETCAPTURE]</dt><dd>Shepherd, Eric; et. al. <a href="https://developer.mozilla.org/en/DOM/element.setCapture"><cite>element.setCapture</cite></a> 12 Nov 2010. Mozilla Developer Network. URL: <a href="https://developer.mozilla.org/en/DOM/element.setCapture">https://developer.mozilla.org/en/DOM/element.setCapture</a>
</dd></dl></div></div></body></html>
